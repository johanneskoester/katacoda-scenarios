As a last step, we strive to annotate our workflow with some additional information.

## Automatic reports

Snakemake can automatically create HTML reports with

    snakemake --report report.html

Such a report contains runtime statistics, a visualization of the workflow topology, used software and data provenance information.

In addition, you can mark any output file generated in your workflow for inclusion into the report.
It will be encoded directly into the report, such that it can be, e.g., emailed as a self-contained document.
The reader (e.g., a collaborator of yours) can at any time download the enclosed results from the report for further use, e.g., in a manuscript you write together.
In this example, please mark the output file `"plots/quals.svg"` for inclusion by replacing it with `report("plots/quals.svg", caption="report/calling.rst")` and adding a file `report/calling.rst`, containing some description of the output file.
This description will be presented as caption in the resulting report.

To view the report, run

    pushd report.html; python3 -m http.server 80; popd;

## Threads

The first rule `bwa` can in theory use multiple threads. You can make Snakemake aware of this, such that the information can be used for scheduling.
Add a directive `threads: 8` to the rule and alter the shell command to

    bwa mem -t {threads} {input} | samtools view -Sb - > {output}

This passes the threads defined in the rule as a command line argument to the `bwa` process.


## Temporary files

The output of the `bwa` rule becomes superfluous once the sorted version of the `.bam` file is generated by the rule `sort`. Snakemake can automatically delete the superfluous output once it is not needed anymore.
For this, mark the output as temporary by replacing `"mapped/{sample}.bam"` in the rule `bwa` with `temp("mapped/{sample}.bam")`.
